preferredThumbnails = { ?subject rs:PX_has_main_representation ?representation_region . ?representation_region a rs:EX_Digital_Image_Region . ?representation_region crmdig:L49_is_primary_area_of ?representation. ?representation_region rs:boundingBox ?bb. OPTIONAL { ?representation crmdig:L60i_is_documented_by/crmdig:L11_had_output/rs:PX_has_file_name ?fileName . } OPTIONAL { ?representation crmdig:L60i_is_documented_by/crmdig:L11_had_output ?externalIIIFService . ?externalIIIFService a crmdig:D1_Digital_Object . } BIND(STRAFTER(?bb\\, 'xywh=') AS ?boundingBox). BIND(STRBEFORE(?boundingBox\\, "\\,") AS ?xString) BIND(STRBEFORE(STRAFTER(?boundingBox\\, "\\,")\\, "\\,") AS ?yString) BIND(STRBEFORE(STRAFTER(STRAFTER(?boundingBox\\, "\\,")\\, "\\,")\\, "\\,") AS ?wString) BIND(STRAFTER(STRAFTER(STRAFTER(?boundingBox\\, "\\,")\\, "\\,")\\, "\\,") AS ?hString) BIND(xsd:integer(?xString) AS ?x) BIND(xsd:integer(?yString) AS ?y) BIND(xsd:integer(?wString) AS ?w) BIND(xsd:integer(?hString) AS ?h) BIND (CONCAT(COALESCE(str(?externalIIIFService)\\, CONCAT('/digilib/Scaler/IIIF/'\\, ?fileName))\\, '/'\\, ?boundingBox\\, '/!'\\, STR(IF(?w <= 640\\, ?w\\, 640))\\, '\\,'\\, STR(IF(?h <= 480\\, ?h\\, 480))\\, '/0/default.jpg') AS ?value) },{ ?subject rs:PX_has_main_representation ?representation . ?representation a rs:EX_Digital_Image . OPTIONAL { ?representation crmdig:L60i_is_documented_by/crmdig:L11_had_output/rs:PX_has_file_name ?fileName. } OPTIONAL { ?representation crmdig:L60i_is_documented_by/crmdig:L11_had_output ?externalIIIFService. ?externalIIIFService a crmdig:D1_Digital_Object.} BIND(CONCAT(COALESCE(STR(?externalIIIFService)\\, CONCAT('/digilib/Scaler/IIIF/'\\, ?fileName))\\, '/full/!640\\,480/0/default.jpg') AS ?value) },{ ?subject rs:PX_has_main_representation ?representation . ?representation a rs:EX_Digital_Image . BIND(REPLACE(STR(?representation)\\, "^.*/(.*)$"\\, "$1") as ?imageID) . BIND(CONCAT('/digilib/Scaler/IIIF/'\\, ?imageID\\, '/full/!640\\,480/0/default.jpg') AS ?value) },{ ?subject a rs:EX_Digital_Image . OPTIONAL { ?subject crmdig:L60i_is_documented_by/crmdig:L11_had_output/rs:PX_has_file_name ?fileName. } OPTIONAL { ?subject crmdig:L60i_is_documented_by/crmdig:L11_had_output ?externalIIIFService. ?externalIIIFService a crmdig:D1_Digital_Object.} BIND(CONCAT(COALESCE(STR(?externalIIIFService)\\, CONCAT('/digilib/Scaler/IIIF/'\\, ?fileName))\\, '/full/!640\\,480/0/default.jpg') AS ?value) },{ ?subject a rs:EX_Digital_Image . BIND(REPLACE(STR(?subject)\\, "^.*/(.*)$"\\, "$1") as ?imageID) . BIND(CONCAT('/digilib/Scaler/IIIF/'\\, ?imageID\\, '/full/!640\\,480/0/default.jpg') AS ?value) },{ ?subject crm:P138i_has_representation ?representation . ?representation a rs:EX_Digital_Image . OPTIONAL { ?representation crmdig:L60i_is_documented_by/crmdig:L11_had_output/rs:PX_has_file_name ?fileName. } OPTIONAL { ?representation crmdig:L60i_is_documented_by/crmdig:L11_had_output ?externalIIIFService. ?externalIIIFService a crmdig:D1_Digital_Object.} BIND(CONCAT(COALESCE(STR(?externalIIIFService)\\, CONCAT('/digilib/Scaler/IIIF/'\\, ?fileName))\\, '/full/!640\\,480/0/default.jpg') AS ?value) },{ ?subject crm:P138i_has_representation ?representation . ?representation a rs:EX_Digital_Image . BIND(REPLACE(STR(?representation)\\, "^.*/(.*)$"\\, "$1") as ?imageID) . BIND(CONCAT('/digilib/Scaler/IIIF/'\\, ?imageID\\, '/full/!640\\,480/0/default.jpg') AS ?value) },{ ?subject crm:P138i_has_representation ?representation . ?representation a rs:EX_Digital_Image_Region . ?representation crmdig:L49_is_primary_area_of ?image . ?image crmdig:L60i_is_documented_by/crmdig:L11_had_output/rs:PX_has_file_name ?fileName. ?representation rs:boundingBox ?bb. BIND(STRAFTER(?bb\\, 'xywh=') AS ?boundingBox). BIND(CONCAT('/digilib/Scaler/IIIF/'\\, ?fileName\\, '/'\\, ?boundingBox\\, '/!640\\,480/0/default.jpg') AS ?value) },{ ?subject crm:P138i_has_representation ?representation . ?representation a rs:EX_Digital_Image_Region . ?representation crmdig:L49_is_primary_area_of ?image . ?representation rs:boundingBox ?bb. BIND(STRAFTER(?bb\\, 'xywh=') AS ?boundingBox). BIND(REPLACE(STR(?image)\\, "^.*/(.*)$"\\, "$1") as ?imageID) . BIND(CONCAT('/digilib/Scaler/IIIF/'\\, ?imageID\\, '/'\\, ?boundingBox\\, '/!640\\,480/0/default.jpg') AS ?value) },<http://www.researchspace.org/ontology/PX_has_main_representation>,{ ?object <http://www.researchspace.org/ontology/PX_has_main_representation> ?subject . BIND(?subject as ?value) }
